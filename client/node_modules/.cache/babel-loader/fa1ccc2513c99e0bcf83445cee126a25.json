{"ast":null,"code":"import _regeneratorRuntime from \"/home/bkonshak/project/nihal_capstone/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/bkonshak/project/nihal_capstone/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport { AUTH_USER, AUTH_ERROR } from './types';\nimport { ROOT_URL } from '../constants';\nexport var getEmployee = function getEmployee(callback) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                try {} catch (e) {}\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var createUser = function createUser(formProps, callback) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return axios.post(\"\".concat(ROOT_URL, \"/signup\"), formProps);\n\n              case 3:\n                response = _context2.sent;\n                // dispatch({});\n                callback();\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                dispatch({\n                  type: AUTH_ERROR,\n                  payload: 'Email in use'\n                });\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 7]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var signup = function signup(formProps, callback) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return axios.post(\"\".concat(ROOT_URL, \"/signup\"), formProps);\n\n              case 3:\n                response = _context3.sent;\n                dispatch({\n                  type: AUTH_USER,\n                  payload: response.data.token\n                });\n                localStorage.setItem('token', response.data.token); // Persists user login status through localStorage\n\n                callback(); // User redirected to feature page\n\n                _context3.next = 12;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](0);\n                dispatch({\n                  type: AUTH_ERROR,\n                  payload: 'Email in use'\n                });\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 9]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var signin = function signin(formProps, callback) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return axios.post(\"\".concat(ROOT_URL, \"/signin\"), formProps);\n\n              case 3:\n                response = _context4.sent;\n                // TODO: Send admin status from response to Redux\n                console.log('response from actions', response);\n                dispatch({\n                  type: AUTH_USER,\n                  payload: response.data.token,\n                  admin: response.data.admin\n                });\n                localStorage.setItem('token', response.data.token); // Persists user login status through localStorage\n\n                callback(); // User redirected to feature page\n\n                _context4.next = 13;\n                break;\n\n              case 10:\n                _context4.prev = 10;\n                _context4.t0 = _context4[\"catch\"](0);\n                dispatch({\n                  type: AUTH_ERROR,\n                  payload: 'Invalid login'\n                });\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 10]]);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var signout = function signout() {\n  localStorage.removeItem('token');\n  return {\n    type: AUTH_USER,\n    payload: ''\n  };\n};","map":{"version":3,"sources":["/home/bkonshak/project/nihal_capstone/client/src/actions/index.js"],"names":["axios","AUTH_USER","AUTH_ERROR","ROOT_URL","getEmployee","callback","dispatch","e","createUser","formProps","post","response","type","payload","signup","data","token","localStorage","setItem","signin","console","log","admin","signout","removeItem"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { AUTH_USER, AUTH_ERROR } from './types';\nimport { ROOT_URL } from '../constants';\n\nexport const getEmployee = (callback) => async dispatch => {\n    try {\n\n    }\n    catch(e) {\n\n    }\n}\n\nexport const createUser = (formProps, callback) => async dispatch => {\n    try {\n        const response = await axios.post(`${ROOT_URL}/signup`, formProps);\n        // dispatch({});\n        callback();\n    }\n    catch(e) {\n        dispatch({ type: AUTH_ERROR, payload: 'Email in use' });\n    }\n}\n\nexport const signup = (formProps, callback) => async dispatch => {\n    // formProps contains { email: '', password: '' }\n    try {\n        const response = await axios.post(`${ROOT_URL}/signup`, formProps);\n        dispatch({ type: AUTH_USER, payload: response.data.token });\n        localStorage.setItem('token', response.data.token); // Persists user login status through localStorage\n        callback(); // User redirected to feature page\n    } catch(e) {\n        dispatch({ type: AUTH_ERROR, payload: 'Email in use' });\n    }\n};\n\nexport const signin = (formProps, callback) => async dispatch => {\n    // formProps contains { email: '', password: '' }\n    try {\n        const response = await axios.post(`${ROOT_URL}/signin`, formProps);\n        // TODO: Send admin status from response to Redux\n        console.log('response from actions', response);\n        dispatch({ type: AUTH_USER, payload: response.data.token, admin: response.data.admin });\n        localStorage.setItem('token', response.data.token); // Persists user login status through localStorage\n        callback(); // User redirected to feature page\n    } catch(e) {\n        dispatch({ type: AUTH_ERROR, payload: 'Invalid login' });\n    }\n};\n\nexport const signout = () => {\n    localStorage.removeItem('token');\n    return {\n        type: AUTH_USER,\n        payload: ''\n    }\n};"]},"metadata":{},"sourceType":"module"}